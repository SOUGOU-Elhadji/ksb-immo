<div class="container">

  <pre>{{ agences | json }}</pre>

  <hr>


  <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
    <mat-form-field>
      <mat-label for="nomId">Nom Agence</mat-label>
      <input matInput placeholder="Nom agence" id="nomId" formControlName="nom" placeholder="Nom* (obligatoire)"
      [ngClass]="{ 'is-invalid': formErrors.nom }" >
      <span class="invalid-feedback">
        {{ formErrors.nom }}
      </span>
    </mat-form-field> &nbsp; &nbsp;

    <mat-form-field>
      <mat-label>Adresse</mat-label>
      <input matInput placeholder="Adresse" formControlName="adresse" placeholder="Adresse* (obligatoire)"
      [ngClass]="{ 'is-invalid': formErrors.adresse }" >
    </mat-form-field> &nbsp; &nbsp;

    <mat-form-field>
      <mat-label>Region</mat-label>
      <input matInput placeholder="Region" formControlName="region" placeholder="Region* (obligatoire)"
      [ngClass]="{ 'is-invalid': formErrors.region }" >
    </mat-form-field> &nbsp; &nbsp;

    <mat-form-field>
      <mat-label>Departement</mat-label>
      <input matInput placeholder="departement" formControlName="departement" placeholder="departement* (obligatoire)"
      [ngClass]="{ 'is-invalid': formErrors.departement }" >
    </mat-form-field> &nbsp; &nbsp;

    <mat-form-field>
      <mat-label>Telephone</mat-label>
      <input matInput placeholder="telephone" formControlName="telephone" placeholder="Telephone* (obligatoire)"
      [ngClass]="{ 'is-invalid': formErrors.telephone }" >
    </mat-form-field> &nbsp; &nbsp;

    <mat-form-field>
      <mat-label>Date de Creation</mat-label>
      <input matInput type="date" placeholder="Date Creation" formControlName="dateCreation"
      [ngClass]="{ 'is-invalid': formErrors.date }" >
    </mat-form-field> &nbsp; &nbsp;

    <!-- <mat-form-field>
      <mat-label>Ville</mat-label>
      <input matInput placeholder="Ville" formControlName="ville">
    </mat-form-field> &nbsp; &nbsp; -->

    Add a new employee &nbsp; &nbsp;
    <button type="button" mat-raised-button (click)="addEmployee()">
      <mat-icon matTooltip="Add a new Employee">add</mat-icon>
    </button>
    <br>
    <hr>

    <div formArrayName="employees" *ngFor="let u of employeeArray.controls; index as i" id="click">

      <span>Employee {{ i + 1 }}</span> &nbsp; &nbsp;

      <!-- <app-create-employee [inputFormGroup]="$any(u)"></app-create-employee> &nbsp; &nbsp; -->

      

     
        <div [formGroupName]="i">

          <mat-form-field>
            <mat-label attr.for="{{ 'matriculeId' + i }}" >Matricule</mat-label>
            <input matInput placeholder="Matricule" formControlName="matricule" id="{{ 'matriculeId' + i }}">
          </mat-form-field> &nbsp; &nbsp;
  
          <mat-form-field>
            <mat-label attr.for="{{ 'nomId' + i }}" >Nom</mat-label>
            <input matInput placeholder="Nom" formControlName="nom" id="{{ 'nomId' + i }}">
          </mat-form-field> &nbsp; &nbsp;

          <mat-form-field>
            <mat-label attr.for="{{ 'prenomId' + i }}" >Prenom</mat-label>
            <input matInput placeholder="Prenom" formControlName="prenom" id="{{ 'prenomId' + i }}">
          </mat-form-field> &nbsp; &nbsp;

          <mat-form-field>
            <mat-label attr.for="{{ 'telephoneId' + i }}" >Telephone</mat-label>
            <input matInput placeholder="Telephone" formControlName="telephone" id="{{ 'telephoneId' + i }}">
          </mat-form-field> &nbsp; &nbsp;

          <mat-form-field>
            <mat-label attr.for="{{ 'emailId' + i }}" >Email</mat-label>
            <input matInput placeholder="Email" type="email" formControlName="email" id="{{ 'emailId' + i }}">
          </mat-form-field> &nbsp; &nbsp;

          <mat-form-field>
            <mat-label attr.for="{{ 'cniId' + i }}" >CNI</mat-label>
            <input matInput placeholder="Cni" formControlName="cni" id="{{ 'cniId' + i }}">
          </mat-form-field> &nbsp; &nbsp;

          <mat-form-field>
            <mat-label attr.for="{{ 'adresseId' + i }}" >Adreesse</mat-label>
            <input matInput placeholder="adresse" formControlName="adresse" id="{{ 'adresseId' + i }}">
          </mat-form-field> &nbsp; &nbsp;

          <mat-form-field>
            <mat-label attr.for="{{ 'numCompteBancaireId' + i }}" >Numero Compte Bancaire</mat-label>
            <input matInput placeholder="Numero Compte Bancaire" formControlName="numCompteBancaire" id="{{ 'numCompteBancaireId' + i }}">
          </mat-form-field> &nbsp; &nbsp;

         
          <label class="example-margin" attr.for="{{ 'managerId' + i }}">Manager:</label>
          <mat-radio-group aria-label="Select an option" formControlName="manager" id="{{ 'managerId' + i }}">
            <mat-radio-button class="example-margin" value="true">True</mat-radio-button>
            <mat-radio-button class="example-margin" value="false">False</mat-radio-button>
          </mat-radio-group>&nbsp; &nbsp;

          <!-- <mat-form-field>
            <mat-label attr.for="{{ 'agenceId' + i }}" >Agence</mat-label>
            <select matNativeControl formControlName="agence" id="{{ 'agenceId' + i }}">
              <option value="" selected></option>
              <option *ngFor="let a of agences" ngValue="a.id" >{{ a.nom }}</option>
            </select>
          </mat-form-field> &nbsp; &nbsp;
   -->
          <br>
          <button mat-raised-button color="warn" (click)="removeEmployee(i)">
            <mat-icon>delete</mat-icon>
          </button>&nbsp;
          <button type="button" mat-raised-button (click)="addEmployee()">
            <mat-icon matTooltip="Add a new Employee">save</mat-icon>
          </button>
      </div><br>


      <!-- <button mat-raised-button color="accent" (click)="removeEmployee(i)">
        <mat-icon>delete</mat-icon>
      </button> -->
      <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

        <!--- Note that these columns can be defined in any order.
              The actual rendered columns are set as a property on the row definition" -->
      
        <!-- Position Column -->
        <ng-container matColumnDef="position">
          <th mat-header-cell *matHeaderCellDef> No. </th>
          <td mat-cell *matCellDef="let element"> {{element.matricule}} </td>
        </ng-container>
      
        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef> Name </th>
          <td mat-cell *matCellDef="let element"> {{element.name}} </td>
        </ng-container>
      
        <!-- Weight Column -->
        <ng-container matColumnDef="weight">
          <th mat-header-cell *matHeaderCellDef> Weight </th>
          <td mat-cell *matCellDef="let element"> {{element.weight}} </td>
        </ng-container>
      
        <!-- Symbol Column -->
        <ng-container matColumnDef="symbol">
          <th mat-header-cell *matHeaderCellDef> Symbol </th>
          <td mat-cell *matCellDef="let element"> {{element.symbol}} </td>
        </ng-container>
      
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
      
      <hr>
    </div>
   
    

    <button type="submit" mat-raised-button color="primary">Submit</button>
  </form>

</div>